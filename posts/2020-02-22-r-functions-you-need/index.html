<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Bend R functions to your will  | João Matias</title>
<meta name="keywords" content="">
<meta name="description" content="In this post, I will mention a few R functions that are very useful to manipulate other functions or objects. If you are not acquainted with them, I hope that they open a whole world of possibilities in the R code you develop, as they did for me.
1. Ellipsis Ellipsis (...) may be placed in the definition of a function to substitute multiple values that are given as arguments to that function and are not captured by other argument variables.">
<meta name="author" content="">
<link rel="canonical" href="https://joaopmatias.github.io/posts/2020-02-22-r-functions-you-need/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.b29c033c94e643d6c1e264ba90dc4760cb51e4fde2d4da154293b9c96e124ef9.css" integrity="sha256-spwDPJTmQ9bB4mS6kNxHYMtR5P3i1NoVQpO5yW4STvk=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://joaopmatias.github.io/snake.ico">
<link rel="apple-touch-icon" href="https://joaopmatias.github.io/snake-apple-touch.png">

<meta name="twitter:title" content="Bend R functions to your will  | João Matias" />
<meta name="twitter:description" content="In this post, I will mention a few R functions that are very useful to manipulate other functions or objects. If you are not acquainted with them, I hope that they open a whole world of possibilities in the R code you develop, as they did for me.
1. Ellipsis Ellipsis (...) may be placed in the definition of a function to substitute multiple values that are given as arguments to that function and are not captured by other argument variables." />
<meta property="og:title" content="Bend R functions to your will  | João Matias" />
<meta property="og:description" content="In this post, I will mention a few R functions that are very useful to manipulate other functions or objects. If you are not acquainted with them, I hope that they open a whole world of possibilities in the R code you develop, as they did for me.
1. Ellipsis Ellipsis (...) may be placed in the definition of a function to substitute multiple values that are given as arguments to that function and are not captured by other argument variables." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joaopmatias.github.io/posts/2020-02-22-r-functions-you-need/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2020-02-22T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2020-02-22T00:00:00&#43;00:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://joaopmatias.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Bend R functions to your will ",
      "item": "https://joaopmatias.github.io/posts/2020-02-22-r-functions-you-need/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Bend R functions to your will  | João Matias",
  "name": "Bend R functions to your will ",
  "description": "In this post, I will mention a few R functions that are very useful to manipulate other functions or objects. If you are not acquainted with them, I hope that they open a whole world of possibilities in the R code you develop, as they did for me.\n1. Ellipsis Ellipsis (...) may be placed in the definition of a function to substitute multiple values that are given as arguments to that function and are not captured by other argument variables.",
  "keywords": [
    
  ],
  "wordCount" : "593",
  "inLanguage": "en",
  "datePublished": "2020-02-22T00:00:00Z",
  "dateModified": "2020-02-22T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://joaopmatias.github.io/posts/2020-02-22-r-functions-you-need/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "João Matias",
    "logo": {
      "@type": "ImageObject",
      "url": "https://joaopmatias.github.io/snake.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>


</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://joaopmatias.github.io" accesskey="h" title="João Matias (Alt + H)">João Matias</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://joaopmatias.github.io/posts/" title="Posts" class="active"
                >Posts
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/archives/" title="Archives"
                >Archives
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/tags/" title="Tags"
                >Tags
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/series/" title="Series"
                >Series
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/about/" title="About"
                >About
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Bend R functions to your will </h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>February 22, 2020</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>3 min</span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>In this post, I will mention a few R functions that are very useful to manipulate other functions or objects. If you are not acquainted with them, I hope that they open a whole world of possibilities in the R code you develop, as they did for me.</p>
<h3 id="1-ellipsis">1. Ellipsis<a hidden class="anchor" aria-hidden="true" href="#1-ellipsis">¶</a></h3>
<p>Ellipsis (<code>...</code>) may be placed in the definition of a function to substitute multiple values that are given as arguments to that function and are not captured by other argument variables.</p>
<p>The expression <code>...</code> may then be used in the body of the function in lieu of writing the values that is substituting.</p>
<p>As an example take the following function that returns the sum of the arguments other than <code>a</code>.</p>
<pre tabindex="0"><code>&gt; sum_rest &lt;- function(a, ...) return(sum(...))
&gt; sum_rest(1, 2, 3)
[1] 5
&gt; sum_rest(1, a = 2, 3)
[1] 4
</code></pre><p>Note that in the first calculation the value returned is <code>sum(2, 3)</code> whereas the value in the second calculation is <code>sum(1, 3)</code> since the second argument is declared as a keyword argument that matches the first variable.</p>
<h3 id="2-docall">2. do.call<a hidden class="anchor" aria-hidden="true" href="#2-docall">¶</a></h3>
<p><code>do.call</code> executes a function using the values in a given list as arguments. Furthermore, in the case that the list used is a named list, each element in the list is matched with a keyword arguments according to its key (or name).</p>
<p>This function is specially useful to execute a function with an unknown number of arguments.</p>
<p>In the following example, the value of one of the arguments is returned.</p>
<pre tabindex="0"><code>&gt; return_a &lt;- function(a, b, c) return(a)
&gt; do.call(return_a, list(1, 2, 3))
[1] 1
&gt; do.call(return_a, list(&#34;b&#34; = 1, &#34;a&#34; = 2, &#34;c&#34; = 3))
[1] 2
</code></pre><p>Finally, if the function uses ellipsis in its definition, then the list provided may have more values than the number of arguments of the function.</p>
<pre tabindex="0"><code>&gt; return_a &lt;- function(a, b, c, ...) return(a)
&gt; do.call(return_a, list(1, 2, 3, 4, 5))
[1] 1
</code></pre><h3 id="3-formals">3. formals<a hidden class="anchor" aria-hidden="true" href="#3-formals">¶</a></h3>
<p><code>formals</code> allows to manipulate the keyword arguments of a function. It takes as argument a function and returns a named list with each key (or name) matching one of the arguments of the function and the corresponding value matching the default value of that argument. Changing the object returned by <code>formals</code> also affects the keyword arguments, their default values or the order of the keyword arguments.</p>
<p>Let us look at an example where the argument variable of a function is changed.</p>
<pre tabindex="0"><code>&gt; dummy &lt;- function(x = 0) return(0)
&gt; formals(dummy)
$x
[1] 0
&gt; formals(dummy) &lt;- list(&#34;y&#34; = 0)
&gt; dummy
function(y = 0)
return(0)
</code></pre><p>In the example above, the change does not affect the values returned by the function, but that may not be the case if the result depends on positional arguments.</p>
<pre tabindex="0"><code>&gt; dummy &lt;- function(x = 0, y = 0) return(x)
&gt; dummy(1, 2)
[1] 1
&gt; formals(dummy) &lt;- list(&#34;y&#34; = 0, &#34;x&#34; = 0)
&gt; dummy
function(y = 0, x = 0)
return(x)
&gt; dummy(1, 2)
[1] 2
</code></pre><p>In combination with <code>bquote()</code> we may also remove the default values, by creating a list with elements that have a key and no values.</p>
<pre tabindex="0"><code>&gt; dummy &lt;- function(x = 0, y = 0) return(x)
&gt; formals(dummy) &lt;- list(&#34;y&#34; = bquote(), &#34;x&#34; = bquote(), &#34;...&#34; = bquote())
&gt; dummy
function(y, x, ...)
return(x)
</code></pre><h3 id="4-get">4. get<a hidden class="anchor" aria-hidden="true" href="#4-get">¶</a></h3>
<p>Finally, an alternative way to evaluate a variable is using the <code>get</code> function.</p>
<pre tabindex="0"><code>&gt; x &lt;- 1
&gt; get(&#34;x&#34;)
[1] 1
&gt; string &lt;- &#34;x&#34;
&gt; get(string)
[1] 1
</code></pre><h3 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">¶</a></h3>
<p>I hope you find this post useful and share your favorite tricks of the R language, too!</p>


    
	
  </div>

  <footer class="post-footer">
  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2023 <a href="https://joaopmatias.github.io">João Matias</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
