<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Tuning the zsh shell using zinit and powerlevel10k | João Matias</title>
<meta name="keywords" content="">
<meta name="description" content="As a programmer, the command line terminal is one of the most important tools I use. By default, the appearance of this application is very plain, but there are ways to customize its looks and functionality. So, I&rsquo;d like to share some of my favorite tools that can improve the experience while using it. In particular, I&rsquo;m a big fan of zinit and powerlevel10k. You can also see my shell configuration in my dotfiles.">
<meta name="author" content="">
<link rel="canonical" href="https://joaopmatias.github.io/posts/2021-02-06-zsh_part_1/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.b29c033c94e643d6c1e264ba90dc4760cb51e4fde2d4da154293b9c96e124ef9.css" integrity="sha256-spwDPJTmQ9bB4mS6kNxHYMtR5P3i1NoVQpO5yW4STvk=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://joaopmatias.github.io/snake.ico">
<link rel="apple-touch-icon" href="https://joaopmatias.github.io/snake-apple-touch.png">

<meta name="twitter:title" content="Tuning the zsh shell using zinit and powerlevel10k | João Matias" />
<meta name="twitter:description" content="As a programmer, the command line terminal is one of the most important tools I use. By default, the appearance of this application is very plain, but there are ways to customize its looks and functionality. So, I&rsquo;d like to share some of my favorite tools that can improve the experience while using it. In particular, I&rsquo;m a big fan of zinit and powerlevel10k. You can also see my shell configuration in my dotfiles." />
<meta property="og:title" content="Tuning the zsh shell using zinit and powerlevel10k | João Matias" />
<meta property="og:description" content="As a programmer, the command line terminal is one of the most important tools I use. By default, the appearance of this application is very plain, but there are ways to customize its looks and functionality. So, I&rsquo;d like to share some of my favorite tools that can improve the experience while using it. In particular, I&rsquo;m a big fan of zinit and powerlevel10k. You can also see my shell configuration in my dotfiles." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joaopmatias.github.io/posts/2021-02-06-zsh_part_1/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2021-02-06T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2021-02-06T00:00:00&#43;00:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://joaopmatias.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Tuning the zsh shell using zinit and powerlevel10k",
      "item": "https://joaopmatias.github.io/posts/2021-02-06-zsh_part_1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Tuning the zsh shell using zinit and powerlevel10k | João Matias",
  "name": "Tuning the zsh shell using zinit and powerlevel10k",
  "description": "As a programmer, the command line terminal is one of the most important tools I use. By default, the appearance of this application is very plain, but there are ways to customize its looks and functionality. So, I\u0026rsquo;d like to share some of my favorite tools that can improve the experience while using it. In particular, I\u0026rsquo;m a big fan of zinit and powerlevel10k. You can also see my shell configuration in my dotfiles.",
  "keywords": [
    
  ],
  "wordCount" : "750",
  "inLanguage": "en",
  "datePublished": "2021-02-06T00:00:00Z",
  "dateModified": "2021-02-06T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://joaopmatias.github.io/posts/2021-02-06-zsh_part_1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "João Matias",
    "logo": {
      "@type": "ImageObject",
      "url": "https://joaopmatias.github.io/snake.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script>


</head>

<body class=" type-posts kind-page layout-post" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://joaopmatias.github.io" accesskey="h" title="João Matias (Alt + H)">João Matias</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://joaopmatias.github.io/posts/" title="Posts" class="active"
                >Posts
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/archives/" title="Archives"
                >Archives
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/tags/" title="Tags"
                >Tags
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/series/" title="Series"
                >Series
                </a>
            </li>
            <li>
                <a href="https://joaopmatias.github.io/about/" title="About"
                >About
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">Tuning the zsh shell using zinit and powerlevel10k</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>February 6, 2021</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>4 min</span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><p>As a programmer, the command line terminal is one of the most important tools I use. By default, the appearance of this application is very plain, but there are ways to customize its looks and functionality. So, I&rsquo;d like to share some of my favorite tools that can improve the experience while using it. In particular, I&rsquo;m a big fan of <a href="https://github.com/zdharma-continuum/zinit">zinit</a> and <a href="https://github.com/romkatv/powerlevel10k">powerlevel10k</a>. You can also see my shell configuration in my <a href="https://github.com/joaopmatias/dotfiles">dotfiles</a>.</p>
<p>I switched to zsh (pronounced z-shell) a while back when it became the default in macOS Catalina (replacing bash). It offers some additional features and can be easily customized using frameworks like <a href="https://github.com/ohmyzsh/ohmyzsh">oh-my-zsh</a> or <a href="https://github.com/sorin-ionescu/prezto">prezto</a>. Despite the convenience, these frameworks add a lot of bloat to the shell configuration of which most people only use part, so I kept searching for more minimal tools that achieve similar results.</p>
<p>If you like to have an idea of the final result, here is a video recorded using <a href="https://asciinema.org/">asciinema</a>.</p>
<p><a href="https://asciinema.org/a/mZiMfwfahA16cmRwbbKEZsFdW">
  <img loading="lazy" src="https://asciinema.org/a/mZiMfwfahA16cmRwbbKEZsFdW.svg" alt="asciicast"  /></a></p>
<p>One of those tools is <a href="https://github.com/zdharma-continuum/zinit">zinit</a>!</p>
<h1 id="zinit">zinit<a hidden class="anchor" aria-hidden="true" href="#zinit">¶</a></h1>
<p><a href="https://github.com/zdharma-continuum/zinit">zinit</a> is a project that provides the option to combine shell configuration scripts from multiple sources (including plugins from <code>oh-my-zsh</code> and <code>prezto</code>!). Furthermore, it gives some control over the timing in which each script is loaded, including after displaying the shell prompt, thus reducing the startup time. The main setback is its learning curve that can be countered by the extensive documentation and examples available.</p>
<p>After installing zinit, the configuration scripts can be taken from github repositories (or gitlab, or bitbucket for that matter) by adding a command like the following in <code>.zshrc</code></p>
<pre tabindex="0"><code>zinit light-mode OMZL::history.zsh
</code></pre><p>The purpose of the command in the example is setting some aliases and environment variables that manage the history of the terminal shell. More concretely, it runs the script <code>history.zsh</code> in the <code>lib</code> folder of the <code>oh-my-zsh</code> github repository since, in zinit, <code>OMZL</code> can be used as an abbreviation for that location. The modifier <code>light-mode</code> disables some reporting and tracking functionalities used to debug the script and that usually are not needed.</p>
<p>It is also possible to combine multiple commands using a <code>for</code> syntax as below</p>
<pre tabindex="0"><code>zinit light-mode depth=1 for \
	romkatv/powerlevel10k \
	OMZL::history.zsh \
	blockf OMZL::completion.zsh
</code></pre><p>In particular, this command also starts up the shell theme <code>powerlevel10k</code> that will be mentioned again later.</p>
<h1 id="more-plugins">More plugins!<a hidden class="anchor" aria-hidden="true" href="#more-plugins">¶</a></h1>
<p>I use a few other plugins that are loaded by the following command in <code>.zshrc</code>.</p>
<pre tabindex="0"><code>zinit wait lucid light-mode depth=1 for \
	atinit&#34;zicompinit; zicdreplay&#34; \
		zdharma-continuum/fast-syntax-highlighting \
	zdharma-continuum/history-search-multi-word \
	atload&#34;bindkey &#39;^[[A&#39; history-substring-search-up; \
			bindkey &#39;^[[B&#39; history-substring-search-down&#34; \
		zsh-users/zsh-history-substring-search
</code></pre><p>There are a few modifiers that make the plugins work flawlessly and that you may read about in the <a href="https://zdharma-continuum.github.io/zinit/wiki/">zinit wiki</a>. The most relevant is <code>wait</code>, which enables the turbo-mode. This option makes the shell wait for the prompt to be displayed before loading the associated plugins.</p>
<p>The last two plugins listed in the command help navigating through entries in the commands history. <a href="https://github.com/zsh-users/zsh-history-substring-search">zsh-users/zsh-history-substring-search</a> allows the users to scroll, using the up and down arrows, through the entries of the history that contain some given subtstrings. <a href="https://github.com/zdharma-continuum/history-search-multi-word">zdharma-continuum/history-search-multi-word</a> performs a similar action by pressing <code>Control+R</code>, but has a slightly different interface.</p>
<p>zdharma-continuum, the group that maintains zinit, also maintains some impressive plugins that can replace older and slower plugins that have been shared for years on the internet. One example is <a href="https://github.com/zdharma-continuum/fast-syntax-highlighting">Fast Syntax Highlighting</a>. This plugin highlights the shell commands to improve their appearance and readability. It does so very quickly and shows a significant difference in speed when compared to other options like <a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting</a> (check the video below).</p>
<p><a href="https://asciinema.org/a/112367">
  <img loading="lazy" src="https://asciinema.org/a/112367.svg" alt="asciicast"  /></a>
(source: <a href="https://github.com/zdharma-continuum/fast-syntax-highlighting#performance">fast-syntax-highlighting performance</a>)</p>
<h1 id="powerlevel10k">powerlevel10k<a hidden class="anchor" aria-hidden="true" href="#powerlevel10k">¶</a></h1>
<p><code>powerlevel10k</code> is a theme based on vim&rsquo;s <code>powerline</code> so its look does not disappoint. It stands out from other similar looking themes due to its responsiveness. On my daily use, I&rsquo;ve never noticed it lagging, even when pressing the return key repeatedly. Furthermore, it has the option to load instantly uppon openning a new terminal session by adding the following in <code>.zshrc</code></p>
<pre tabindex="0"><code>if [[ -r &#34;${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh&#34; ]]; then
  source &#34;${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh&#34;
fi
</code></pre><p>It is also very easy to configure and provides plently of options to tweak. Just use the command <code>p10k configure</code> (example below) to run the wizard. After configuring the theme, the settings are saved in the file <code>.p10k.zsh</code> which can be edited separately, too (at the user&rsquo;s risk, though). For example, one can place the time in the left side of the shell by changing the property <code>POWERLEVEL9K_LEFT_PROMPT_ELEMENTS</code>, among other options.</p>
<p><a href="https://asciinema.org/a/R7g34OLXPel0emZqTfm3G3ufc">
  <img loading="lazy" src="https://asciinema.org/a/R7g34OLXPel0emZqTfm3G3ufc.svg" alt="asciicast"  /></a></p>
<p>I hope you enjoyed these tips and learned something new! Feel free to reach out if you have comments.</p>


    
	
  </div>

  <footer class="post-footer">
  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2023 <a href="https://joaopmatias.github.io">João Matias</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
